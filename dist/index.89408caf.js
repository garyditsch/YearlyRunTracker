async function t(t,e,a,...l){const n=new Date(l[0].startDate).getTime(),r=new Date(l[0].endDate).getTime();a.selectAll("*").remove();let u=new Date(r).getTime(),o=new Date(n).getTime(),s=await t(e);console.log(s);let i=s.filter((t=>{var e=new Date(t.date).getTime();return o<e&&e<u}));const d=i.reduce(((t,e)=>t+e.value),0).toFixed(0),c=i[0].date.getFullYear(),h=i.length,p=t=>t.getUTCDay(),m=i.reduce((function(t,e){return t.some((function(t){return t.date.toLocaleString("en-US")===e.date.toLocaleString("en-US")}))?t.filter((function(t){return t.date.toLocaleString("en-US")===e.date.toLocaleString("en-US")}))[0].value+=+e.value:t.push({date:e.date,value:+e.value}),t}),[]),g=d3.nest().key((t=>t.date.toLocaleString("default",{month:"short"}))).entries(m);g.sort(((t,e)=>t.values[0].date>e.values[0].date?1:e.values[0].date>t.values[0].date?-1:0));const v=g.map((t=>{if("Jan"===t.key){const e=[];return t.values.map((t=>e.push(t.value))),{key:"Jan",total:d3.sum(e).toFixed(2)}}if("Feb"===t.key){const e=[];return t.values.map((t=>e.push(t.value))),{key:"Feb",total:d3.sum(e).toFixed(2)}}if("Mar"===t.key){const e=[];return t.values.map((t=>e.push(t.value))),{key:"Mar",total:d3.sum(e).toFixed(2)}}if("Apr"===t.key){const e=[];return t.values.map((t=>e.push(t.value))),{key:"Apr",total:d3.sum(e).toFixed(2)}}if("May"===t.key){const e=[];return t.values.map((t=>e.push(t.value))),{key:"May",total:d3.sum(e).toFixed(2)}}if("Jun"===t.key){const e=[];return t.values.map((t=>e.push(t.value))),{key:"Jun",total:d3.sum(e).toFixed(2)}}if("Jul"===t.key){const e=[];return t.values.map((t=>e.push(t.value))),{key:"Jul",total:d3.sum(e).toFixed(2)}}if("Aug"===t.key){const e=[];return t.values.map((t=>e.push(t.value))),{key:"Aug",total:d3.sum(e).toFixed(2)}}if("Sep"===t.key){const e=[];return t.values.map((t=>e.push(t.value))),{key:"Sep",total:d3.sum(e).toFixed(2)}}if("Aug"===t.key){const e=[];return t.values.map((t=>e.push(t.value))),{key:"Aug",total:d3.sum(e).toFixed(2)}}if("Oct"===t.key){const e=[];return t.values.map((t=>e.push(t.value))),{key:"Oct",total:d3.sum(e).toFixed(2)}}if("Nov"===t.key){const e=[];return t.values.map((t=>e.push(t.value))),{key:"Nov",total:d3.sum(e).toFixed(2)}}if("Dec"===t.key){const e=[];return t.values.map((t=>e.push(t.value))),{key:"Dec",total:d3.sum(e).toFixed(2)}}})),y=m.map((t=>t.value)),f=d3.max(y),k=d3.min(y),x=10,D=d3.utcSunday,F=d3.utcFormat("%x");a.append("g").attr("text-anchor","end").selectAll("text").data(d3.range(7).map((t=>new Date(1995,0,t)))).join("text").attr("x",20).attr("y",(t=>(p(t)+.5)*x+50)).attr("dy","0.31em").attr("font-size",10).text((t=>["Sun","","Tue","","Thu","","Sat"][t.getUTCDay()])),a.append("text").attr("x",0).attr("y",10).attr("height",45).attr("width",500).attr("font-size",12).text(`${c} | Total Miles: ${d}, Total Runs: ${h}`),a.append("g").selectAll("text").data(g).enter().append("text").attr("x",((t,e)=>75*e+15+10)).attr("y",30).attr("height",45).attr("width",50).attr("font-size",12).text((t=>t.key)).style("fill","#000"),a.append("g").selectAll("text").data(v).enter().append("text").attr("x",((t,e)=>75*e+15+10)).attr("y",40).attr("height",15).attr("width",50).attr("font-size",10).text((t=>`${t.total} mi`)).style("fill","#000000");const w=a.append("g").selectAll("g").data(g).join("g").attr("transform",((t,e)=>`translate(${75*e+15}, 0)`)),S=d3.scaleSequential(d3.interpolateBlues).domain([Math.floor(k),Math.ceil(f)]);d3.format("+.2%");w.append("g").selectAll("rect").data((t=>t.values)).join("rect").attr("width",8.5).attr("height",8.5).attr("x",((t,e)=>D.count(d3.utcMonth(t.date),t.date)*x+10)).attr("y",(t=>p(t.date)*x+.5+50)).attr("fill",(t=>S(t.value))).append("title").text((t=>`${F(t.date)}: ${t.value.toFixed(2)}`))}const e=d3.select("#calendar_svg_2022"),a="https://quizzical-tereshkova-82c9ca.netlify.app/api/get-run-data",l="https://quizzical-tereshkova-82c9ca.netlify.app/api/get-past-run-data";let n=document.querySelector("select");n.addEventListener("change",(async()=>{switch(console.log(n.value),n.value){case"2022":t(theData,a,e,{startDate:"12/31/2021",endDate:"1/1/2023",height:500,width:900,margin:{left:0,right:10,top:100,bottom:10}});break;case"2021":t(theData,a,e,{startDate:"12/31/2020",endDate:"1/1/2022",height:500,width:900,margin:{left:0,right:10,top:100,bottom:10}});break;case"2020":t(theData,a,e,{startDate:"12/31/2019",endDate:"1/1/2021",height:500,width:900,margin:{left:0,right:10,top:100,bottom:10}});break;case"2019":t(theData,l,e,{startDate:"12/31/2018",endDate:"1/1/2020",height:500,width:900,margin:{left:0,right:10,top:100,bottom:10}});break;case"2018":t(theData,l,e,{startDate:"12/31/2017",endDate:"1/1/2019",height:500,width:900,margin:{left:0,right:10,top:100,bottom:10}});break;case"2017":t(theData,l,e,{startDate:"12/31/2016",endDate:"1/1/2018",height:500,width:900,margin:{left:0,right:10,top:100,bottom:10}})}}));
//# sourceMappingURL=index.89408caf.js.map
